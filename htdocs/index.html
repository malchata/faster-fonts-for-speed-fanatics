<!doctype html><html><head><meta charset="utf-8"><meta name="viewport" content="width=device-width,initial-scale=1"><title>Faster Fonts for Speed Fanatics</title><link rel="stylesheet" href="css/reveal.css"><link rel="stylesheet" href="css/theme/speed.css"><link rel="stylesheet" href="lib/css/zenburn.css"></head><body><div class="reveal"><div class="slides"><section data-state="purple"><img class="stretch" src="/img/title-card.svg" alt="Faster Fonts for Speed Fanatics"></section><section><section data-state="red"><h1>How Browsers Render Fonts</h1></section><section><h3>The truth about font rendering:</h3><h1>Fonts don't load like other resources do!</h1></section><section data-state="white"><div class="rotate"><h3>But first...</h3><h1>A quick recap of<br>resource loading</h1></div></section><section data-state="white"><div class="rotate"><h3>Meet</h3><h1>The players</h1></div></section><section data-state="white"><div class="rotate"><img src="/img/server.svg" alt="A cartoony drawing of a web server."><h3>Web server</h3></div></section><section data-state="white"><div class="rotate"><img src="/img/browser.svg" alt="A cartoony drawing of a browser."><h3>Browser</h3></div></section><section data-state="white"><div class="rotate"><img src="/img/resource.svg" alt="A cartoony drawing of a page resource."><h3>Resource</h3></div></section><section data-state="white"><div class="rotate"><h3>Witness</h3><h1>The action</h1></div></section><section data-state="white"><div class="rotate"><img src="/img/request.svg" alt="A cartoony drawing of a browser requesting a resource."><h3>The Browser<br>requests a resource</h3></div></section><section data-state="white"><div class="rotate"><img src="/img/response.svg" alt="A cartoony drawing of a web server sending a response."><h3>Web server responds</h3></div></section><section data-state="white"><div class="rotate"><h1>Intermission</h1><h3>Render blocking in progress...</h3></div></section><section data-state="white"><div class="rotate"><img src="/img/paint.svg" alt="A cartoony drawing of a browser holding up a paint brush."><h3>The page begins painting</h3></div></section><section><h3>Render blocking is a matter of</h3><h1>Priorities</h1></section><section><h3>When it comes to font loading,</h3><h1>Browsers speculate!</h1></section><section><h2>The font loading process</h2><svg id="Layer_1" class="stretch" data-name="Layer 1" xmlns="http://www.w3.org/2000/svg" width="8.8in" height="1.9in" viewBox="0 0 633.6 136.8"><defs><style>.cls-1,.cls-4{font-size:12px;font-family:Economica-Bold,Economica;font-weight:700}.cls-1,.cls-2,.cls-4{fill:#fbfef9}.cls-3,.cls-4{opacity:.75}.cls-5{fill:none;stroke:#fbfef9;stroke-linecap:round;stroke-linejoin:round;stroke-width:2px}</style></defs><title>font-loading</title><text class="cls-1" transform="translate(5.3 14.8)">BROWSER REQUESTS<tspan x="19.9" y="14.4">DOCUMENT</tspan></text><text class="cls-1" transform="translate(118 14.8)">BROWSER PARSES<tspan x="15.1" y="14.4">DOCUMENT</tspan></text><text class="cls-1" transform="translate(546.6 14.8)">DOCUMENT FINISHES<tspan x="22.8" y="14.4">LOADING</tspan></text><text class="cls-1" transform="translate(552.3 65.2)">PAGE RENDERING<tspan x="11.6" y="14.4">COMPLETES</tspan></text><text class="cls-1" transform="translate(121.8 65.2)">BROWSER FINDS<tspan x="-5.5" y="14.4">AND REQUESTS CSS</tspan></text><text class="cls-1" transform="translate(226 65.2)">BROWSER PARSES<tspan x="7.2" y="14.4">CSS RESOURCE</tspan></text><text class="cls-1" transform="translate(229.8 115.6)">BROWSER FINDS<tspan x="5.7" y="14.4">@FONT-FACES</tspan></text><text class="cls-1" transform="translate(330.1 115.6)">BROWSER EXAMINES<tspan x="17.3" y="14.4">TEXT NODES</tspan></text><path class="cls-2" d="M518.4 102.8a5.2 5.2 0 0 1 5.2 5.2v21.6a5.2 5.2 0 0 1-5.2 5.2h-79.2a5.2 5.2 0 0 1-5.2-5.2V108a5.2 5.2 0 0 1 5.2-5.2h79.2m0-2h-79.2a7.2 7.2 0 0 0-7.2 7.2v21.6a7.2 7.2 0 0 0 7.2 7.2h79.2a7.2 7.2 0 0 0 7.2-7.2V108a7.2 7.2 0 0 0-7.2-7.2zm-108 2a5.2 5.2 0 0 1 5.2 5.2v21.6a5.2 5.2 0 0 1-5.2 5.2h-79.2a5.2 5.2 0 0 1-5.2-5.2V108a5.2 5.2 0 0 1 5.2-5.2h79.2m0-2h-79.2a7.2 7.2 0 0 0-7.2 7.2v21.6a7.2 7.2 0 0 0 7.2 7.2h79.2a7.2 7.2 0 0 0 7.2-7.2V108a7.2 7.2 0 0 0-7.2-7.2zM86.4 2a5.2 5.2 0 0 1 5.2 5.2v21.6a5.2 5.2 0 0 1-5.2 5.2H7.2A5.2 5.2 0 0 1 2 28.8V7.2A5.2 5.2 0 0 1 7.2 2h79.2m0-2H7.2A7.2 7.2 0 0 0 0 7.2v21.6A7.2 7.2 0 0 0 7.2 36h79.2a7.2 7.2 0 0 0 7.2-7.2V7.2A7.2 7.2 0 0 0 86.4 0zm108 2a5.2 5.2 0 0 1 5.2 5.2v21.6a5.2 5.2 0 0 1-5.2 5.2h-79.2a5.2 5.2 0 0 1-5.2-5.2V7.2a5.2 5.2 0 0 1 5.2-5.2h79.2m0-2h-79.2a7.2 7.2 0 0 0-7.2 7.2v21.6a7.2 7.2 0 0 0 7.2 7.2h79.2a7.2 7.2 0 0 0 7.2-7.2V7.2a7.2 7.2 0 0 0-7.2-7.2zm0 52.4a5.2 5.2 0 0 1 5.2 5.2v21.6a5.2 5.2 0 0 1-5.2 5.2h-79.2a5.2 5.2 0 0 1-5.2-5.2V57.6a5.2 5.2 0 0 1 5.2-5.2h79.2m0-2h-79.2a7.2 7.2 0 0 0-7.2 7.2v21.6a7.2 7.2 0 0 0 7.2 7.2h79.2a7.2 7.2 0 0 0 7.2-7.2V57.6a7.2 7.2 0 0 0-7.2-7.2zm108 2a5.2 5.2 0 0 1 5.2 5.2v21.6a5.2 5.2 0 0 1-5.2 5.2h-79.2a5.2 5.2 0 0 1-5.2-5.2V57.6a5.2 5.2 0 0 1 5.2-5.2h79.2m0-2h-79.2a7.2 7.2 0 0 0-7.2 7.2v21.6a7.2 7.2 0 0 0 7.2 7.2h79.2a7.2 7.2 0 0 0 7.2-7.2V57.6a7.2 7.2 0 0 0-7.2-7.2zm108 2a5.2 5.2 0 0 1 5.2 5.2v21.6a5.2 5.2 0 0 1-5.2 5.2h-79.2a5.2 5.2 0 0 1-5.2-5.2V57.6a5.2 5.2 0 0 1 5.2-5.2h79.2m0-2h-79.2a7.2 7.2 0 0 0-7.2 7.2v21.6a7.2 7.2 0 0 0 7.2 7.2h79.2a7.2 7.2 0 0 0 7.2-7.2V57.6a7.2 7.2 0 0 0-7.2-7.2zm-108 52.4a5.2 5.2 0 0 1 5.2 5.2v21.6a5.2 5.2 0 0 1-5.2 5.2h-79.2a5.2 5.2 0 0 1-5.2-5.2V108a5.2 5.2 0 0 1 5.2-5.2h79.2m0-2h-79.2a7.2 7.2 0 0 0-7.2 7.2v21.6a7.2 7.2 0 0 0 7.2 7.2h79.2a7.2 7.2 0 0 0 7.2-7.2V108a7.2 7.2 0 0 0-7.2-7.2zM626.4 2a5.2 5.2 0 0 1 5.2 5.2v21.6a5.2 5.2 0 0 1-5.2 5.2h-79.2a5.2 5.2 0 0 1-5.2-5.2V7.2a5.2 5.2 0 0 1 5.2-5.2h79.2m0-2h-79.2a7.2 7.2 0 0 0-7.2 7.2v21.6a7.2 7.2 0 0 0 7.2 7.2h79.2a7.2 7.2 0 0 0 7.2-7.2V7.2a7.2 7.2 0 0 0-7.2-7.2zm0 52.4a5.2 5.2 0 0 1 5.2 5.2v21.6a5.2 5.2 0 0 1-5.2 5.2h-79.2a5.2 5.2 0 0 1-5.2-5.2V57.6a5.2 5.2 0 0 1 5.2-5.2h79.2m0-2h-79.2a7.2 7.2 0 0 0-7.2 7.2v21.6a7.2 7.2 0 0 0 7.2 7.2h79.2a7.2 7.2 0 0 0 7.2-7.2V57.6a7.2 7.2 0 0 0-7.2-7.2z"/><text class="cls-1" transform="translate(437.3 115.6)">BROWSER REQUESTS<tspan x="7.5" y="14.4">FONT RESOURCES</tspan></text><text class="cls-1" transform="translate(333.2 65.2)">BROWSER APPLIES<tspan x="1" y="14.4">CSS TO DOCUMENT</tspan></text><g class="cls-3"><path class="cls-2" d="M415.6 2v32H326V2h89.6m2-2H324v36h93.6V0z"/></g><text class="cls-4" transform="translate(340.8 14.8)">OTHER STUFF™<tspan x="11.2" y="14.4">HAPPENS</tspan></text><path class="cls-5" d="M93.6 18H108l-6.1-6.1m0 12.2L108 18m93.6 50.4H216l-6.1-6.1m0 12.2l6.1-6.1"/><g class="cls-3"><path class="cls-5" d="M201.6 18H324l-6.1-6.1m0 12.2L324 18"/></g><g class="cls-3"><path class="cls-5" d="M417.6 18H540l-6.1-6.1m0 12.2L540 18"/></g><path class="cls-5" d="M417.6 68.4H540l-6.1-6.1m0 12.2l6.1-6.1m40.7 24.1l6.1-6.1m0 0l6.1 6.1M309.6 68.4H324l-6.1-6.1m0 12.2l6.1-6.1m93.6 50.4H432l-6.1-6.1m0 12.2l6.1-6.1m155.4-68.4V36l-6.1 6.1m12.2 0l-6.1-6.1m-277.8 82.8H324l-6.1-6.1m0 12.2l6.1-6.1m-61.2-32.4v14.4l6.1-6.1m-12.2 0l6.1 6.1M154.8 36v14.4l6.1-6.1m-12.2 0l6.1 6.1m370.8 68.4h61.2V86.4"/></svg><h4 class="fragment">If it seems complicated, that's because it is.</h4></section><section><h1>Font loading in pictures</h1><picture><source srcset="/img/font-loading-01.webp" type="image/webp"><img src="/img/font-loading-01.png" alt="A web browser loading fonts on a page, with no text visible yet."></picture><h2>1.89 s</h2></section><section><h1>Font loading in pictures</h1><picture><source srcset="/img/font-loading-02.webp" type="image/webp"><img src="/img/font-loading-02.png" alt="A web browser loading fonts on a page, with only heading text visible (but not body copy)."></picture><h2>2.31 s</h2></section><section><h1>Font loading in pictures</h1><picture><source srcset="/img/font-loading-03.webp" type="image/webp"><img src="/img/font-loading-03.png" alt="A web browser after loading all fonts on a page, with all text now visible."></picture><h2>2.42 s</h2></section></section><section><section data-state="red"><h1>Host Your Own Fonts</h1></section><section data-state="raccoon"><h2>Most developers:</h2><video muted id="raccoon"><source src="/video/raccoon.webm" type="video/webm"><source src="/video/raccoon.mp4" type="video/mp4"><source src="/video/raccoon.ogv" type="video/ogg"></video></section><section><h3>Self hosting offers better</h3><h1>Performance <span class="lowercase">and</span> control</h1></section><section><h1>Less cross origins requests</h1><h2><code>==</code></h2><h1>Less potential latency</h1></section><section><h2>Cross origin font requests:</h2><picture><source srcset="/img/cross-origin-fonts.webp" type="image/webp"><img src="/img/cross-origin-fonts.png" alt="A waterfall chart in Chrome dev tools showing the latency involved with cross origin font requests."></picture></section><section><h2>Same origin font requests:</h2><picture><source srcset="/img/same-origin-fonts.webp" type="image/webp"><img src="/img/same-origin-fonts.png" alt="A waterfall chart in Chrome dev tools showing same origin font requests."></picture></section></section><section><section data-state="red"><h1><code>font-display</code></h1><h3>For better font rendering control</h3></section></section><section><section data-state="red"><h1><code>rel=preload</code></h1><h3>to Accelerate Font Rendering</h3></section><section><h2>What is <code>rel=preload</code> for?</h2><blockquote cite="https://www.w3.org/TR/preload/#early-fetch-and-application-defined-execution">&quot;...most resource declarations specified within JavaScript and CSS are 'hidden' from the speculative parsers and incur a performance penalty. To address this, the application can use a <code>preload</code> link to declaratively specify which resources the user agent must fetch early to improve page performance.&quot;</blockquote></section><section><h4>In other words...</h4><h2><code>rel=preload</code> initiates an early fetch for a resource before the browser knows it even needs it.</h2></section><section><h1><code>rel=preload</code> affects resource priority:</h1><div><h3>Without <code>rel=preload</code></h3></div></section></section><section><section data-state="red"><h1>Subset to the extreme!</h1></section><section><h1>Aggressive subsetting</h1><h2><code>==</code></h2><h1>Less bytes over the wire</h1></section><section><h3>Where aggressive subsetting is appropriate:</h3><h1 class="fragment">Static text nodes that don't change often</h1><h4 class="fragment">(That's pretty much it)</h4></section><section><h2>Aggressive subsetting example:</h2><picture><source srcset="/img/aggressive-subset-example.webp" type="image/webp"><img src="/img/aggressive-subset-example.png" alt='Picture of a blog page heading, with the text "Web Dev Blog" in a highly decorative font.'></picture></section><section><h2><code>WEB DEV BLOG</code></h2><div class="fragment"><h3>⬇</h3><h2><code>WEB DVLOG</code></h2></div><div class="fragment"><h3>⬇</h3><h2><code>U+20,U+42,U+44,U+45,U+47,U+4C,U+4F,U+56,U+57</code></h2></div></section><section><pre><code class="bash">pyftsubset monoton.ttf \
  --unicodes='U+20,U+42,U+44,U+45,U+47,U+4C,U+4F,U+56,U+57' \
  --output-file=monoton-subset.ttf \
  --name-IDs='*'</code></pre></section><section><h2>Aggressive subsetting gains</h2><table><thead><tr><th>Format</th><th class="right">Latin (KB)</th><th class="right">Aggressive (KB)</th><th class="right">Reduction</th></tr></thead><tbody><tr><td>WOFF2</td><td class="right">16.02</td><td class="right">1.86</td><td class="right bold">-88%</td></tr><tr><td>WOFF2</td><td class="right">20.75</td><td class="right">2.55</td><td class="right bold">-87%</td></tr><tr><td>TTF</td><td class="right">38.57</td><td class="right">3.36</td><td class="right bold">-91%</td></tr></tbody></table></section><section><h2>If it goes well, you'll say</h2><picture class="fragment"><source srcset="/img/good-subsetting.webp" type="image/webp"><img src="/img/good-subsetting.png" alt="An image showing proper font subsetting."></picture></section><section><h2>If it backfires, you'll say</h2><picture class="fragment"><source srcset="/img/bad-subsetting.webp" type="image/webp"><img src="/img/bad-subsetting.png" alt="An image showing faulty font subsetting."></picture></section></section><section><section><h1>Cull Unnecessary Fonts</h1><h3>with <code>Save-Data</code></h3></section></section></div></div><script src="lib/js/head.min.js"></script><script src="js/reveal.js"></script><script>Reveal.initialize({history:!0,controls:!1,transition:"none",progress:!1,viewDistance:2,help:!1,dependencies:[{src:"plugin/notes/notes.js",async:!0},{src:"plugin/highlight/highlight.js",async:!0,callback:function(){hljs.initHighlightingOnLoad()}}]}),Reveal.addEventListener("raccoon",function(){console.log("event hit!"),document.getElementById("raccoon").play()})</script><script src="/js/jquery.js"></script></body></html>